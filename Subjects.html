<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subject Selection - Kindergarten Report Generator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: 
                url('https://images.unsplash.com/photo-1502134249126-9f3755a50d78?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80') center/cover no-repeat fixed,
                radial-gradient(ellipse at center, rgba(30, 39, 70, 0.8) 0%, rgba(15, 15, 35, 0.9) 50%, rgba(0, 0, 0, 0.95) 100%);
            min-height: 100vh;
            padding: 20px;
            margin: 0;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Space stars animation */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(2px 2px at 20px 30px, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255, 255, 255, 0.6), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255, 255, 255, 0.5), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255, 255, 255, 0.4), transparent),
                radial-gradient(2px 2px at 160px 30px, rgba(255, 255, 255, 0.7), transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 20s linear infinite;
            pointer-events: none;
            z-index: 1;
        }
        
        @keyframes twinkle {
            0% { transform: translateY(0px) translateX(0px) rotate(0deg); opacity: 0.8; }
            50% { opacity: 1; }
            100% { transform: translateY(-200px) translateX(100px) rotate(360deg); opacity: 0.8; }
        }
        
        .container {
            background: rgba(255, 255, 255, 0.3);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 30px;
            cursor/add-tick-boxes-and-refresh-button-d0c7
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        .refresh-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #27ae60;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        .refresh-button:hover {
            background-color: #229954;

            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                0 0 50px rgba(255, 255, 255, 0.1);
           main
        }
        
        h1 {
            color: white;
            font-size: 2.2em;
            margin-bottom: 25px;
            font-weight: 600;
            text-align: center;
            font-family: 'Segoe UI', sans-serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .subject-section {
            margin-bottom: 15px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .subject-header {
            padding: 15px 20px;
            cursor: pointer;
            background: rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .subject-header:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .subject-title {
            font-size: 18px;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .topic-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            gap: 10px;
        }
        
        .topic-text {
            flex: 1;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            font-size: 14px;
        }
        
        .dropdown-arrow {
            transition: transform 0.3s ease;
            color: white;
            margin-left: auto;
        }
        
        .dropdown-arrow.rotated {
            transform: rotate(180deg);
        }
        
        .button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            font-family: 'Segoe UI', sans-serif;
            margin: 8px 4px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(52, 152, 219, 0.3);
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .button-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            box-shadow: 0 3px 10px rgba(39, 174, 96, 0.3);
        }
        
        .button-success:hover {
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }
        
        .selection-summary {
            background: #f1f8ff;
            border: 1px solid #3498db;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
            color: #2c3e50;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .bulk-actions {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            text-align: center;
        }
        
        .comment-option {
            margin: 15px 0;
            padding: 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            background: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #2c3e50;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .comment-option:hover {
            border-color: #3498db;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.1);
        }
        
        .comment-option.selected {
            border-color: #27ae60;
            background: #f1f8ff;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.2);
        }
        
        .navigation {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            border-top: 2px solid #e0e6ed;
        }
        
        .final-actions {
            margin-top: 20px;
            text-align: center;
            padding: 15px;
            border-top: 1px solid #e0e6ed;
        }
        
        .comments-section {
            margin-top: 25px;
            border-top: 2px solid #e0e6ed;
            padding-top: 25px;
        }
        
        .comment-box {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            margin: 8px 0;
            min-height: 80px;
            border: 1px solid #e0e6ed;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .subject-content {
            display: none;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .subject-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .subject-header {
                padding: 12px 15px;
            }
            
            .subject-title {
                font-size: 16px;
            }
            
            .topic-text {
                font-size: 13px;
            }
            
            .button {
                padding: 10px 20px;
                font-size: 13px;
                margin: 6px 3px;
            }
            
            .comment-option {
                padding: 12px;
                margin: 10px 0;
            }
            
            .comment-box {
                min-height: 60px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
 cursor/add-tick-boxes-and-refresh-button-d0c7
        <button type="button" class="refresh-button" onclick="refreshReport()">🔄 Refresh Report</button>

        <button type="button" class="button" id="refreshReportBtn" style="float:right;" onclick="refreshReport()">Refresh Report</button>
     main
        <h1>Subject Selection</h1>
        <p style="text-align: center; color: #7f8c8d; margin-bottom: 25px; font-family: 'Segoe UI', sans-serif;">
            Select subjects and rate student performance (0-5 scale, 5 being excellent).
        </p>
        
        <div class="bulk-actions">
            <button type="button" class="button" onclick="selectAll()">Select All</button>
            <button type="button" class="button" onclick="clearAll()">Clear All</button>
        </div>

        <div class="selection-summary">
            <strong>Selected Topics: </strong><span id="selectionCount">0</span>
        </div>

        <form id="subjectsForm">
            <!-- ENGLISH -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('english')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_english" value="English" onchange="handleSubjectCheck('english')">
                        <label for="subject_english">ENGLISH</label>
                        <span class="dropdown-arrow" id="arrow_english">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_english">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="english1" value="matching letters to pictures">
                        <label for="english1" class="topic-text">Matching letters to pictures</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="english2" value="tracing and coloring letters">
                        <label for="english2" class="topic-text">Tracing and coloring letters</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="english3" value="matching identical letters">
                        <label for="english3" class="topic-text">Matching identical letters</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="english4" value="identifying beginning letter sounds">
                        <label for="english4" class="topic-text">Identifying beginning letter sounds</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="english5" value="singing the alphabet song with actions">
                        <label for="english5" class="topic-text">Singing the alphabet song with actions</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="english6" value="writing uppercase and lowercase letters">
                        <label for="english6" class="topic-text">Writing uppercase and lowercase letters</label>
                    </div>
                </div>
            </div>            <!-- PHONICS -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('phonics')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_phonics" value="Phonics" onchange="handleSubjectCheck('phonics')">
                        <label for="subject_phonics">PHONICS</label>
                        <span class="dropdown-arrow" id="arrow_phonics">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_phonics">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="phonics1" value="recognizing letters A-E">
                        <label for="phonics1" class="topic-text">Recognizing letters A-E</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="phonics2" value="learning 'C' vocabulary (e.g., Cat, Cut)">
                        <label for="phonics2" class="topic-text">Learning 'C' vocabulary (e.g., Cat, Cut)</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="phonics3" value="learning 'E' vocabulary (e.g., Elephant, Egg)">
                        <label for="phonics3" class="topic-text">Learning 'E' vocabulary (e.g., Elephant, Egg)</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="phonics4" value="identifying the beginning sounds of objects">
                        <label for="phonics4" class="topic-text">Identifying the beginning sounds of objects</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="phonics5" value="blending simple CVC words">
                        <label for="phonics5" class="topic-text">Blending simple CVC words</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="phonics6" value="recognizing rhyming words">
                        <label for="phonics6" class="topic-text">Recognizing rhyming words</label>
                    </div>
                </div>
            </div>            <!-- MATHEMATICS -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('mathematics')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_mathematics" value="Mathematics" onchange="handleSubjectCheck('mathematics')">
                        <label for="subject_mathematics">MATHEMATICS</label>
                        <span class="dropdown-arrow" id="arrow_mathematics">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_mathematics">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="math1" value="counting from 1 to 10">
                        <label for="math1" class="topic-text">Counting from 1 to 10</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="math2" value="tracing numbers 1-3">
                        <label for="math2" class="topic-text">Tracing numbers 1-3</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="math3" value="matching quantities to numbers">
                        <label for="math3" class="topic-text">Matching quantities to numbers</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="math4" value="counting with fingers">
                        <label for="math4" class="topic-text">Counting with fingers</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="math5" value="identifying basic shapes">
                        <label for="math5" class="topic-text">Identifying basic shapes</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="math6" value="sorting objects by shape">
                        <label for="math6" class="topic-text">Sorting objects by shape</label>
                    </div>
                </div>
            </div>            <!-- I.Q -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('iq')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_iq" value="I.Q" onchange="handleSubjectCheck('iq')">
                        <label for="subject_iq">I.Q</label>
                        <span class="dropdown-arrow" id="arrow_iq">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_iq">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="iq1" value="matching animals to their food">
                        <label for="iq1" class="topic-text">Matching animals to their food</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="iq2" value="recognizing shapes and colors">
                        <label for="iq2" class="topic-text">Recognizing shapes and colors</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="iq3" value="completing shape puzzles">
                        <label for="iq3" class="topic-text">Completing shape puzzles</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="iq4" value="playing memory games">
                        <label for="iq4" class="topic-text">Playing memory games</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="iq5" value="sorting objects by size">
                        <label for="iq5" class="topic-text">Sorting objects by size</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="iq6" value="recognizing and completing patterns">
                        <label for="iq6" class="topic-text">Recognizing and completing patterns</label>
                    </div>
                </div>
            </div>            <!-- SOCIAL STUDIES -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('social')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_social" value="Social Studies" onchange="handleSubjectCheck('social')">
                        <label for="subject_social">SOCIAL STUDIES</label>
                        <span class="dropdown-arrow" id="arrow_social">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_social">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="social1" value="learning about farm animals">
                        <label for="social1" class="topic-text">Learning about farm animals</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="social2" value="identifying animal sounds">
                        <label for="social2" class="topic-text">Identifying animal sounds</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="social3" value="learning parts of the body">
                        <label for="social3" class="topic-text">Learning parts of the body (e.g., face)</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="social4" value="discussing community helpers">
                        <label for="social4" class="topic-text">Discussing community helpers and their roles</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="social5" value="practicing good manners">
                        <label for="social5" class="topic-text">Practicing good manners at school</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="social6" value="talking about family members">
                        <label for="social6" class="topic-text">Talking about family members and relationships</label>
                    </div>
                </div>
            </div>            <!-- SCIENCE -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('science')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_science" value="Science" onchange="handleSubjectCheck('science')">
                        <label for="subject_science">SCIENCE</label>
                        <span class="dropdown-arrow" id="arrow_science">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_science">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="science1" value="exploring buoyancy with floating/sinking eggs">
                        <label for="science1" class="topic-text">Exploring buoyancy with floating/sinking eggs</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="science2" value="investigating buoyancy with different objects">
                        <label for="science2" class="topic-text">Investigating buoyancy with different objects</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="science3" value="observing gas production in experiments">
                        <label for="science3" class="topic-text">Observing gas production (e.g., balloon blow-up)</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="science4" value="learning about surface tension with milk and colors">
                        <label for="science4" class="topic-text">Learning about surface tension with milk and colors</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="science5" value="exploring the five senses">
                        <label for="science5" class="topic-text">Exploring the five senses</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="science6" value="observing and recording the weather">
                        <label for="science6" class="topic-text">Observing and recording the weather</label>
                    </div>
                </div>
            </div>            <!-- CONVERSATION 1 -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('conv1')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_conv1" value="Conversation Skills" onchange="handleSubjectCheck('conv1')">
                        <label for="subject_conv1">CONVERSATION 1</label>
                        <span class="dropdown-arrow" id="arrow_conv1">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_conv1">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv1_1" value="answering 'How old are you?'">
                        <label for="conv1_1" class="topic-text">Answering "How old are you?"</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv1_2" value="talking about daily routines">
                        <label for="conv1_2" class="topic-text">Talking about daily routines</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv1_3" value="using greetings and introductions">
                        <label for="conv1_3" class="topic-text">Using greetings and introductions</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv1_4" value="answering simple yes/no questions">
                        <label for="conv1_4" class="topic-text">Answering simple yes/no questions</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv1_5" value="expressing likes and dislikes">
                        <label for="conv1_5" class="topic-text">Expressing likes and dislikes</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv1_6" value="using polite words (please, thank you)">
                        <label for="conv1_6" class="topic-text">Using polite words (please, thank you)</label>
                    </div>
                </div>
            </div>            <!-- CONVERSATION 3 -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('conv3')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_conv3" value="Vocabulary Development" onchange="handleSubjectCheck('conv3')">
                        <label for="subject_conv3">CONVERSATION 3</label>
                        <span class="dropdown-arrow" id="arrow_conv3">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_conv3">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv3_1" value="talking about favorite snacks">
                        <label for="conv3_1" class="topic-text">Talking about favorite snacks</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv3_2" value="naming different fruits">
                        <label for="conv3_2" class="topic-text">Naming different fruits</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv3_3" value="identifying various vegetables">
                        <label for="conv3_3" class="topic-text">Identifying various vegetables</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv3_4" value="learning animal vocabulary">
                        <label for="conv3_4" class="topic-text">Learning animal vocabulary</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv3_5" value="describing colors and sizes">
                        <label for="conv3_5" class="topic-text">Describing colors and sizes</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="conv3_6" value="discussing favorite activities">
                        <label for="conv3_6" class="topic-text">Discussing favorite activities</label>
                    </div>
                </div>
            </div>            <!-- PHYSICAL EDUCATION -->
            <div class="subject-section">
                <div class="subject-header" onclick="toggleSubject('pe')">
                    <div class="subject-title">
                        <input type="checkbox" class="subject-checkbox" id="subject_pe" value="Physical Education" onchange="handleSubjectCheck('pe')">
                        <label for="subject_pe">PHYSICAL EDUCATION</label>
                        <span class="dropdown-arrow" id="arrow_pe">▼</span>
                    </div>
                </div>
                <div class="subject-content" id="content_pe">
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="pe1" value="passing a ball with peers">
                        <label for="pe1" class="topic-text">Passing a ball with peers</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="pe2" value="dropping and catching a ball">
                        <label for="pe2" class="topic-text">Dropping and catching a ball</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="pe3" value="participating in racing games">
                        <label for="pe3" class="topic-text">Participating in racing games</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="pe4" value="kicking a football">
                        <label for="pe4" class="topic-text">Kicking a football</label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" class="topic-checkbox" id="pe5" value="practicing balance and coordination">
                        <label for="pe5" class="topic-text">Practicing balance and coordination</label>
                    </div>
                </div>
            </div>        </form>

        <div class="comments-section" id="commentsSection">
            <h2 style="color: #2c3e50; text-align: center;">Generate Report Comments</h2>
            <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px;">
                Click the button below to generate personalized comments based on your selections.
            </p>
            
            <div class="final-actions">
                <button type="button" class="button button-success" id="generateBtn" onclick="generateComments()">
                    Generate Comments
                </button>
            </div>

            <div id="generatedComments" style="display: none;">
                <h3 style="color: #2c3e50; margin-top: 30px;">Choose your preferred comment:</h3>
                  <div class="comment-option" id="comment1" onclick="selectComment(1)">
                    <h4>👨‍🏫 Male Teacher Style <span id="wordCount1" style="color: #7f8c8d; font-weight: normal; font-size: 14px;"></span></h4>
                    <div id="commentText1" class="comment-box">Comments will appear here after generation...</div>
                </div>
                
                <div class="comment-option" id="comment2" onclick="selectComment(2)">
                    <h4>👩‍🏫 Female Teacher Style <span id="wordCount2" style="color: #7f8c8d; font-weight: normal; font-size: 14px;"></span></h4>
                    <div id="commentText2" class="comment-box">Comments will appear here after generation...</div>
                </div>

                <div class="final-actions">
                    <button type="button" class="button" onclick="copySelectedComment()">📋 Copy Selected Comment</button>
                    <button type="button" class="button" onclick="generateComments()">🔄 Generate New Comments</button>
                    <button type="button" class="button button-success" onclick="exportReport()">📄 Export Report</button>
                    <button type="button" class="button" onclick="startOver()">🔄 Start Over</button>
                </div>
            </div>
        </div> <!-- .comments-section -->

        <!-- back-button navigation -->
        <div class="navigation">
            <button type="button" class="button" onclick="goBack()">← Back to Student Info</button>
        </div>

    </div> <!-- .container -->

    <script>
        let selectedTopics = [];
        let selectedComment = null;

        function updateSelectionCount() {
            const count = document.querySelectorAll('.topic-checkbox:checked').length;
            document.getElementById('selectionCount').textContent = count;
        }

        function selectAll() {
            document.querySelectorAll('.topic-checkbox, .subject-checkbox').forEach(checkbox => {
                checkbox.checked = true;
            });
            updateSelectionCount();
            saveSelections();
        }

        function clearAll() {
            document.querySelectorAll('.topic-checkbox, .subject-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            updateSelectionCount();
            saveSelections();
        }

        function saveSelections() {
            const selectedTopics = [];
            const selectedSubjects = [];
            
            document.querySelectorAll('.topic-checkbox:checked').forEach(checkbox => {
                selectedTopics.push(checkbox.value);
            });
            
            document.querySelectorAll('.subject-checkbox:checked').forEach(checkbox => {
                selectedSubjects.push(checkbox.value);
            });
            
            localStorage.setItem('selectedSubjects', JSON.stringify(selectedTopics));
            localStorage.setItem('selectedSubjectTitles', JSON.stringify(selectedSubjects));
            updateSelectionCount();
        }

        function loadSelections() {
            const savedTopics = localStorage.getItem('selectedSubjects');
            const savedSubjects = localStorage.getItem('selectedSubjectTitles');
            
            // First, ensure all dropdowns are closed
            document.querySelectorAll('.subject-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.dropdown-arrow').forEach(arrow => {
                arrow.classList.remove('rotated');
            });
            
            if (savedTopics) {
                const selectedValues = JSON.parse(savedTopics);
                document.querySelectorAll('.topic-checkbox').forEach(checkbox => {
                    if (selectedValues.includes(checkbox.value)) {
                        checkbox.checked = true;
                    }
                });
            }
            
            if (savedSubjects) {
                const selectedSubjectValues = JSON.parse(savedSubjects);
                document.querySelectorAll('.subject-checkbox').forEach(checkbox => {
                    if (selectedSubjectValues.includes(checkbox.value)) {
                        checkbox.checked = true;
                        
                        // Only show dropdown for checked subjects
                        const subjectId = checkbox.id.replace('subject_', '');
                        const content = document.getElementById(`content_${subjectId}`);
                        const arrow = document.getElementById(`arrow_${subjectId}`);
                        if (content && arrow) {
                            content.classList.add('active');
                            arrow.classList.add('rotated');
                        }
                    }
                });
            }
            
            updateSelectionCount();
        }

        function goBack() {
            saveSelections();
            window.location.href = 'student-information.html';
        }

        function generateComment(studentData, selectedTopics, selectedSubjects, variant) {
            const name = studentData.studentName || 'The student';
            const gender = studentData.gender || 'they';

            // Pronoun setup
            const pronouns = {
                he: { subject: 'He', object: 'him', possessive: 'his', verb: 'has', isAre: 'is' },
                she: { subject: 'She', object: 'her', possessive: 'her', verb: 'has', isAre: 'is' },
                they: { subject: 'They', object: 'them', possessive: 'their', verb: 'have', isAre: 'are' }
            };
            const p = pronouns[gender] || pronouns.they;

            const overall = parseInt(studentData.overallAttributes || 5);
            const strengths = studentData.strengths || '';
            const weaknesses = studentData.weaknesses || '';
            
            const subjectData = selectedSubjects || [];
            const topicData = selectedTopics || [];

            function capitalizeSubjects(subjectList) {
                return subjectList.map(subject => {
                    const lower = subject.toLowerCase();
                    const specialCases = { 'english': 'English', 'mathematics': 'Mathematics', 'phonics': 'Phonics', 'science': 'Science', 'social studies': 'Social Studies', 'i.q': 'I.Q', 'physical education': 'Physical Education' };
                    if (specialCases[lower]) return specialCases[lower];
                    if (lower.includes('conversation')) return subject.charAt(0).toUpperCase() + subject.slice(1);
                    return subject.charAt(0).toUpperCase() + subject.slice(1);
                });
            }

            const performanceMap = {
                10: { level: 'exceptional', achievement: 'an outstanding mastery of developmental milestones', attitude: 'exemplary engagement' },
                9: { level: 'excellent', achievement: 'an impressive command of key learning objectives', attitude: 'a consistently positive approach' },
                8: { level: 'very strong', achievement: 'a solid grasp of essential concepts', attitude: 'enthusiastic participation' },
                7: { level: 'strong', achievement: 'a good understanding of fundamental skills', attitude: 'positive engagement' },
                6: { level: 'good', achievement: 'satisfactory progress in key areas', attitude: 'cooperative behavior' },
                5: { level: 'satisfactory', achievement: 'appropriate developmental progress', attitude: 'willing participation' },
                4: { level: 'developing', achievement: 'an emerging understanding of core concepts', attitude: 'engaged learning' },
                3: { level: 'basic', achievement: 'foundational skill recognition', attitude: 'a participative approach' },
                2: { level: 'beginning', achievement: 'early skill development', attitude: 'responsiveness to support' },
                1: { level: 'emerging', achievement: 'initial learning exploration', attitude: 'benefits from guidance' }
            };
            
            const perf = performanceMap[overall] || performanceMap[5];
            const isMaleTeacher = variant === 1;

            const sentences = [];

            // Helper to join lists naturally (e.g., "a, b, and c")
            function naturalJoin(arr) {
                if (arr.length === 0) return '';
                if (arr.length === 1) return arr[0];
                if (arr.length === 2) return arr.join(' and ');
                return `${arr.slice(0, -1).join(', ')}, and ${arr.slice(-1)}`;
            }

            // --- SENTENCE GENERATION ---

            // Opening
            const openings = isMaleTeacher ?
                [`${name} demonstrated ${perf.level} performance this term, showing ${perf.achievement}.`, `This term, ${name} has made ${perf.level} progress, achieving ${perf.achievement}.`] :
                [`${name} ${p.verb} flourished beautifully this term, displaying remarkable growth and development.`, `It has been a joy to watch ${name} grow this term; ${p.subject.toLowerCase()} ${p.verb} made wonderful progress.`];
            sentences.push(openings[Math.floor(Math.random() * openings.length)]);

            // Strengths
            if (strengths.trim()) {
                const strengthList = strengths.split(',').map(s => s.trim().toLowerCase()).filter(Boolean);
                if (strengthList.length > 0) {
                    const strengthText = naturalJoin(strengthList);
                    const strengthSentences = isMaleTeacher ?
                        [`${p.subject} consistently demonstrates strong capabilities in ${strengthText}.`, `${p.possessive} proficiency in ${strengthText} has been a notable highlight.`] :
                        [`${p.possessive} wonderful talent for ${strengthText} truly shines in our classroom.`, `We are especially impressed with ${p.possessive} skills in ${strengthText}.`];
                    sentences.push(strengthSentences[Math.floor(Math.random() * strengthSentences.length)]);
                }
            }

            // Subjects
            if (subjectData.length > 0) {
                const capitalizedSubjects = capitalizeSubjects(subjectData);
                const subjectText = naturalJoin(capitalizedSubjects);
                const subjectSentences = isMaleTeacher ?
                    [`Academic development in ${subjectText} ${p.verb} been particularly noteworthy.`, `In subjects like ${subjectText}, ${name} shows consistent growth and understanding.`] :
                    [`${p.subject} ${p.verb} shown wonderful progress in ${subjectText} with genuine enthusiasm.`, `Our studies in ${subjectText} have been a great success for ${name}.`];
                sentences.push(subjectSentences[Math.floor(Math.random() * subjectSentences.length)]);
            }

            // Topics
            if (topicData.length > 0) {
                const topicText = naturalJoin(topicData.slice(0, 2).map(t => `"${t.toLowerCase()}"`));
                const topicSentences = isMaleTeacher ?
                    [`Notable achievements include mastering activities such as ${topicText}.`, `${p.subject} has successfully engaged with concepts like ${topicText}.`] :
                    [`${p.subject} particularly excelled in ${topicText} and similar learning experiences.`, `Among many accomplishments, ${p.possessive} work on ${topicText} stands out.`];
                sentences.push(topicSentences[Math.floor(Math.random() * topicSentences.length)]);
            }

            // Behavior & Attitude
            const behaviorSentences = isMaleTeacher ?
                [`${p.subject} maintains ${perf.attitude} throughout classroom activities.`, `${p.possessive} learning approach demonstrates maturity and focus.`] :
                [`${name} brings ${perf.attitude} to our classroom every day.`, `${p.possessive} curiosity and wonder make learning truly special.`];
            sentences.push(behaviorSentences[Math.floor(Math.random() * behaviorSentences.length)]);

            // Weaknesses
            if (weaknesses.trim()) {
                const weaknessList = weaknesses.split(',').map(w => w.trim().toLowerCase()).filter(Boolean);
                 if (weaknessList.length > 0) {
                    const weaknessText = naturalJoin(weaknessList);
                    const growthSentences = isMaleTeacher ?
                        [`Continued development in ${weaknessText} will enhance future academic success.`, `We are focusing on improving skills in ${weaknessText}.`] :
                        [`We will continue to nurture ${p.possessive} growth in ${weaknessText} with supportive guidance.`, `With a little more practice in ${weaknessText}, ${name} will surely blossom.`];
                    sentences.push(growthSentences[Math.floor(Math.random() * growthSentences.length)]);
                }
            }

            // Social Skills
            const socialSentences = isMaleTeacher ?
                [`${name} demonstrates appropriate social skills and classroom behavior.`, `${p.possessive} collaborative spirit enhances the learning environment.`] :
                [`${name} brings kindness and cooperation to all classroom interactions.`, `${p.subject} naturally supports classmates and celebrates their successes.`];
            sentences.push(socialSentences[Math.floor(Math.random() * socialSentences.length)]);

            // Conclusion
            const conclusions = isMaleTeacher ?
                [`${name} ${p.isAre} well-prepared for continued academic advancement.`, `${p.possessive} overall development positions ${p.object} well for future success.`] :
                [`${name} ${p.isAre} ready for wonderful new adventures in learning.`, `We are excited to see how ${name} continues to grow and thrive.`];
            sentences.push(conclusions[Math.floor(Math.random() * conclusions.length)]);

            // --- ASSEMBLY & CLEANUP ---
            let comment = sentences.join(' ');

            // Word count adjustment
            let words = comment.split(/\s+/).filter(Boolean);
            if (words.length > 120) {
                // Find a sentence break near the 120-word mark
                const idealLength = 115;
                let cutPoint = -1;
                for (let i = idealLength; i > 80; i--) {
                    if (words[i].endsWith('.')) {
                        cutPoint = i + 1;
                        break;
                    }
                }
                if (cutPoint !== -1) {
                    words = words.slice(0, cutPoint);
                } else {
                    words = words.slice(0, 120); // Fallback to hard cut
                }
            }
            
            let finalComment = words.join(' ');
            if (!/[.!?]$/.test(finalComment)) {
                 finalComment = finalComment.replace(/[,;:]\s*$/, '') + '.';
            }

            return finalComment.trim();
        }

        function generateComments() {
            // parse stored data with valid JSON fallbacks & correct keys
            const studentData = JSON.parse(localStorage.getItem('studentData')               || '{}');
            const subjectData = JSON.parse(localStorage.getItem('selectedSubjectTitles')     || '[]');
            const topicData   = JSON.parse(localStorage.getItem('selectedSubjects')          || '[]');

            // Generate two different comments using whatever data is available
            const comment1 = generateComment(studentData, topicData, subjectData, 1);
            const comment2 = generateComment(studentData, topicData, subjectData, 2);

            document.getElementById('commentText1').innerHTML = comment1;
            document.getElementById('commentText2').innerHTML = comment2;
            
            // Display word counts
            const wordCount1 = comment1.split(' ').length;
            const wordCount2 = comment2.split(' ').length;
            document.getElementById('wordCount1').textContent = `(${wordCount1} words)`;
            document.getElementById('wordCount2').textContent = `(${wordCount2} words)`;
            
            document.getElementById('generatedComments').style.display = 'block';
            document.getElementById('generatedComments').scrollIntoView({ behavior: 'smooth' });
        }

        function toggleSubject(subjectId) {
            const content = document.getElementById(`content_${subjectId}`);
            const arrow = document.getElementById(`arrow_${subjectId}`);
            const checkbox = document.getElementById(`subject_${subjectId}`);
            
            // Only allow toggle if checkbox is checked
            if (checkbox.checked) {
                content.classList.toggle('active');
                arrow.classList.toggle('rotated');
            }
        }
        
        function handleSubjectCheck(subjectId) {
            const checkbox = document.getElementById(`subject_${subjectId}`);
            const content = document.getElementById(`content_${subjectId}`);
            const arrow = document.getElementById(`arrow_${subjectId}`);
            
            if (checkbox.checked) {
                // Show dropdown when subject is checked
                content.classList.add('active');
                arrow.classList.add('rotated');
            } else {
                // Hide dropdown and uncheck all topics when subject is unchecked
                content.classList.remove('active');
                arrow.classList.remove('rotated');
                
                // Uncheck all topics in this subject
                const topicCheckboxes = content.querySelectorAll('.topic-checkbox');
                topicCheckboxes.forEach(cb => {
                    cb.checked = false;
                });
            }
            saveSelections();
        }

        // Load saved selections on page load
        window.addEventListener('load', loadSelections);
        
        // Missing functions for start over and comment selection
        function startOver() {
            // Clear all stored data
            localStorage.clear();
            sessionStorage.clear();
            // Redirect to the beginning
            window.location.href = 'Play.html';
        }
        
        function selectComment(commentNumber) {
            console.log("Selecting comment:", commentNumber);
            
            // Remove selection from other comments
            document.querySelectorAll('.comment-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Select the clicked comment
            const commentElement = document.getElementById(`comment${commentNumber}`);
            if (commentElement) {
                commentElement.classList.add('selected');
                selectedComment = commentNumber;
                console.log("Comment selected successfully");
            } else {
                console.error("Comment element not found:", `comment${commentNumber}`);
            }
        }

        function copySelectedComment() {
            console.log("Attempting to copy comment:", selectedComment);
            
            if (!selectedComment) {
                alert('Please select a comment first by clicking on one of the comment options.');
                return;
            }
            
            const commentElement = document.getElementById(`commentText${selectedComment}`);
            if (!commentElement) {
                console.error("Comment text element not found:", `commentText${selectedComment}`);
                alert("Could not find the selected comment. Please try selecting again.");
                return;
            }
            
            const commentText = commentElement.innerText || commentElement.textContent;
            console.log("Copying text:", commentText.substring(0, 30) + "...");

            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(commentText)
                        .then(() => {
                            alert('Comment copied to clipboard!');
                        })
                        .catch(err => {
                            console.error("Clipboard API error:", err);
                            fallbackCopy(commentText);
                        });
                } else {
                    console.log("Clipboard API not available, using fallback");
                    fallbackCopy(commentText);
                }
            } catch (e) {
                console.error("Error during copy:", e);
                fallbackCopy(commentText);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '0';
            textArea.style.top = '0';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    alert('Comment copied to clipboard!');
                } else {
                    alert('Unable to copy. Please try selecting the text manually and copying it.');
                }
            } catch (err) {
                console.error("Fallback copy failed:", err);
                alert('Copy failed. Please try selecting the text manually and copying it.');
            }
            
            document.body.removeChild(textArea);
        }

      cursor/add-tick-boxes-and-refresh-button-d0c7
        function refreshReport() {
            if (confirm('This will refresh the page and reload all your saved selections. Continue?')) {
                location.reload();
            }
        }

        // Add event listeners to all checkboxes
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('topic-checkbox') || e.target.classList.contains('subject-checkbox')) {
                updateSelectionCount();
                saveSelections();

        function exportReport() {
            const studentData = JSON.parse(localStorage.getItem('studentData') || '{}');
            const selectedSubjects = JSON.parse(localStorage.getItem('selectedSubjectTitles') || '[]');
            const selectedTopics = JSON.parse(localStorage.getItem('selectedSubjects') || '[]');
            
            if (!studentData.studentName) {
                alert('Please complete student information first.');
                return;
         main
            }
            
            const selectedCommentText = selectedComment ? 
                document.getElementById(`commentText${selectedComment}`).innerText : 
                'No comment selected';
            
            const currentDate = new Date().toLocaleDateString();
            
            // Create comprehensive report
            let reportContent = `KINDERGARTEN PROGRESS REPORT


        cursor/add-tick-boxes-and-refresh-button-e783
        // Load saved selections on page load
        window.addEventListener('load', loadSelections);

        // Refresh the current report / selections
        function refreshReport() {
            window.location.reload();
  
Student Information:
- Name: ${studentData.studentName || 'Not specified'}
- Gender: ${studentData.gender || 'Not specified'}
- Overall Rating: ${studentData.overallAttributes || 'Not specified'}/10
- Report Date: ${currentDate}

Strengths:
${studentData.strengths || 'Not specified'}

Areas for Improvement:
${studentData.weaknesses || 'Not specified'}

Selected Subjects:
${selectedSubjects.length > 0 ? selectedSubjects.join(', ') : 'None selected'}

Selected Topics:
${selectedTopics.length > 0 ? selectedTopics.join(', ') : 'None selected'}

Teacher Comment:
${selectedCommentText}


Generated by Teachers Pet - Kindergarten Report Generator
`;

            // Create and download file
            const blob = new Blob([reportContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `${studentData.studentName || 'Student'}_Report_${currentDate.replace(/\//g, '-')}.txt`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
            
            alert('Report exported successfully!');
 main
        }
    </script>
    <script src="debug-tools.js"></script>
</body>
</html>
