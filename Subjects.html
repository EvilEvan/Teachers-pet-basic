<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subject Selection - Kindergarten Report Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .subject-section {
            margin-bottom: 30px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            padding: 20px;
        }        .subject-title {
            color: #3498db;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .subject-checkbox {
            transform: scale(1.3);
            margin-right: 5px;
        }
        .topic-item {
            display: flex;
            align-items: flex-start;
            margin: 10px 0;
            padding: 8px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .topic-item:hover {
            background-color: #f8f9fa;
        }
        .topic-checkbox {
            margin-right: 10px;
            margin-top: 2px;
            transform: scale(1.2);
        }
        .topic-text {
            flex: 1;
            line-height: 1.4;
        }
        .button {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #2980b9;
        }
        .button-success {
            background-color: #27ae60;
        }
        .button-success:hover {
            background-color: #229954;
        }
        .navigation {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            border-top: 2px solid #ecf0f1;
        }
        .selection-summary {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        .bulk-actions {
            margin-bottom: 20px;
            text-align: center;
        }        .bulk-actions button {
            margin: 5px;
            padding: 8px 16px;
            font-size: 14px;
        }
        .comments-section {
            margin-top: 30px;
            border-top: 2px solid #ecf0f1;
            padding-top: 30px;
        }
        .comment-box {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            min-height: 100px;
        }
        .comment-option {
            margin: 15px 0;
            padding: 15px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            background: #f8f9fa;
            cursor: pointer;
        }
        .comment-option:hover {
            background: #e9ecef;
        }
        .comment-option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }
        .final-actions {
            margin-top: 20px;
            text-align: center;
        }
        .final-actions .button {
            margin: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Subject Selection</h1>
        <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px;">
            Select the topics you want to mention in the student's report comments.
        </p>
        
        <div class="bulk-actions">
            <button type="button" class="button" onclick="selectAll()">Select All</button>
            <button type="button" class="button" onclick="clearAll()">Clear All</button>
        </div>

        <div class="selection-summary">
            <strong>Selected Topics: </strong><span id="selectionCount">0</span>
        </div>

        <form id="subjectsForm">            <!-- ENGLISH -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_english" value="English">
                    <label for="subject_english">ENGLISH</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="english1" value="Draw lines to match the letter with the correct picture">
                    <label for="english1" class="topic-text">Draw lines to match the letter with the correct picture</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="english2" value="Trace the letter and color">
                    <label for="english2" class="topic-text">Trace the letter and color</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="english3" value="Draw lines to match the same letters">
                    <label for="english3" class="topic-text">Draw lines to match the same letters</label>
                </div>
            </div>            <!-- PHONICS -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_phonics" value="Phonics">
                    <label for="subject_phonics">PHONICS</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="phonics1" value="Letter A-E recognition">
                    <label for="phonics1" class="topic-text">Letter A-E recognition</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="phonics2" value="Candy Cat-Cut vocabulary">
                    <label for="phonics2" class="topic-text">Candy Cat-Cut vocabulary</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="phonics3" value="Eddie Elephant-Egg vocabulary">
                    <label for="phonics3" class="topic-text">Eddie Elephant-Egg vocabulary</label>
                </div>
            </div>            <!-- MATHEMATICS -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_mathematics" value="Mathematics">
                    <label for="subject_mathematics">MATHEMATICS</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="math1" value="Count from 1-10">
                    <label for="math1" class="topic-text">Count from 1-10</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="math2" value="Trace numbers 1-3">
                    <label for="math2" class="topic-text">Trace numbers 1-3 following the dotted line and coloring</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="math3" value="Place correct amount of pictures in boxes">
                    <label for="math3" class="topic-text">Place the correct amount of pictures in the boxes</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="math4" value="Counting 1-10 with fingers">
                    <label for="math4" class="topic-text">Counting from 1-10 with our fingers</label>
                </div>
            </div>            <!-- I.Q -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_iq" value="I.Q">
                    <label for="subject_iq">I.Q</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="iq1" value="Animal and their food">
                    <label for="iq1" class="topic-text">Animal and their food and different food that animals can eat</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="iq2" value="Shapes and colours">
                    <label for="iq2" class="topic-text">Shapes and colours</label>
                </div>
            </div>            <!-- SOCIAL STUDIES -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_social" value="Social Studies">
                    <label for="subject_social">SOCIAL STUDIES</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="social1" value="Farm animals characteristics">
                    <label for="social1" class="topic-text">Farm animals - characteristic, abilities</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="social2" value="Animal sounds">
                    <label for="social2" class="topic-text">Animal sounds</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="social3" value="My Body - My face">
                    <label for="social3" class="topic-text">My Body - My face</label>
                </div>
            </div>            <!-- SCIENCE -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_science" value="Science">
                    <label for="subject_science">SCIENCE</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="science1" value="Floating Sinking eggs experiment">
                    <label for="science1" class="topic-text">Floating Sinking eggs - Introducing the concept of buoyancy and how salt affects water density</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="science2" value="The Rock is light experiment">
                    <label for="science2" class="topic-text">The Rock is light - Introducing the effects of buoyancy with water</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="science3" value="Bottle balloon blow-up experiment">
                    <label for="science3" class="topic-text">Bottle balloon blow-up experiment - Introducing concept of carbonation (gas) in soda water</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="science4" value="Dancing colors milk experiment">
                    <label for="science4" class="topic-text">Dancing colors (milk) - Introducing concept of surface tension and interactions between different materials</label>
                </div>
            </div>            <!-- CONVERSATION 1 -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_conv1" value="Conversation Skills">
                    <label for="subject_conv1">CONVERSATION 1</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="conv1_1" value="How old are you conversation">
                    <label for="conv1_1" class="topic-text">How old are you? - I am three years old</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="conv1_2" value="Daily routine conversations">
                    <label for="conv1_2" class="topic-text">Daily routine conversations (morning routine, after eating, etc.)</label>
                </div>
            </div>            <!-- CONVERSATION 3 -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_conv3" value="Vocabulary Development">
                    <label for="subject_conv3">CONVERSATION 3</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="conv3_1" value="Snacks conversation">
                    <label for="conv3_1" class="topic-text">Snacks - What snacks do you like? – I like donut</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="conv3_2" value="Fruits conversation">
                    <label for="conv3_2" class="topic-text">Fruits - What is this? - It's a banana</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="conv3_3" value="Vegetables conversation">
                    <label for="conv3_3" class="topic-text">Vegetables - What vegetables do you have? - I have a pumpkin</label>
                </div>
            </div>            <!-- PHYSICAL EDUCATION -->
            <div class="subject-section">
                <div class="subject-title">
                    <input type="checkbox" class="subject-checkbox" id="subject_pe" value="Physical Education">
                    <label for="subject_pe">PHYSICAL EDUCATION</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="pe1" value="Pass the ball">
                    <label for="pe1" class="topic-text">Pass the ball</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="pe2" value="Drop and catch the ball">
                    <label for="pe2" class="topic-text">Drop and catch the ball</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="pe3" value="Racing game">
                    <label for="pe3" class="topic-text">Racing game</label>
                </div>
                <div class="topic-item">
                    <input type="checkbox" class="topic-checkbox" id="pe4" value="Football">
                    <label for="pe4" class="topic-text">Football</label>
                </div>
            </div>        </form>

        <div class="comments-section" id="commentsSection">
            <h2 style="color: #2c3e50; text-align: center;">Generate Report Comments</h2>
            <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px;">
                Click the button below to generate personalized comments based on your selections.
            </p>
            
            <div class="final-actions">
                <button type="button" class="button button-success" id="generateBtn" onclick="generateComments()">
                    Generate Comments
                </button>
            </div>

            <div id="generatedComments" style="display: none;">
                <h3 style="color: #2c3e50; margin-top: 30px;">Choose your preferred comment:</h3>
                  <div class="comment-option" id="comment1" onclick="selectComment(1)">
                    <h4>Option 1: <span id="wordCount1" style="color: #7f8c8d; font-weight: normal; font-size: 14px;"></span></h4>
                    <div id="commentText1" class="comment-box">Comments will appear here after generation...</div>
                </div>
                
                <div class="comment-option" id="comment2" onclick="selectComment(2)">
                    <h4>Option 2: <span id="wordCount2" style="color: #7f8c8d; font-weight: normal; font-size: 14px;"></span></h4>
                    <div id="commentText2" class="comment-box">Comments will appear here after generation...</div>
                </div>

                <div class="final-actions">
                    <button type="button" class="button" onclick="copySelectedComment()">Copy Selected Comment</button>
                    <button type="button" class="button" onclick="generateComments()">Generate New Comments</button>
                    <button type="button" class="button" onclick="startOver()">Start Over</button>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button type="button" class="button" onclick="goBack()">← Back to Student Info</button>
        </div>
    </div>    <script>
        let selectedTopics = [];
        let selectedComment = null;

        function updateSelectionCount() {
            const count = document.querySelectorAll('.topic-checkbox:checked').length;
            document.getElementById('selectionCount').textContent = count;
        }

        function selectAll() {
            document.querySelectorAll('.topic-checkbox, .subject-checkbox').forEach(checkbox => {
                checkbox.checked = true;
            });
            updateSelectionCount();
            saveSelections();
        }

        function clearAll() {
            document.querySelectorAll('.topic-checkbox, .subject-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            updateSelectionCount();
            saveSelections();
        }

        function saveSelections() {
            const selectedTopics = [];
            const selectedSubjects = [];
            
            document.querySelectorAll('.topic-checkbox:checked').forEach(checkbox => {
                selectedTopics.push(checkbox.value);
            });
            
            document.querySelectorAll('.subject-checkbox:checked').forEach(checkbox => {
                selectedSubjects.push(checkbox.value);
            });
            
            localStorage.setItem('selectedSubjects', JSON.stringify(selectedTopics));
            localStorage.setItem('selectedSubjectTitles', JSON.stringify(selectedSubjects));
        }

        function loadSelections() {
            const savedTopics = localStorage.getItem('selectedSubjects');
            const savedSubjects = localStorage.getItem('selectedSubjectTitles');
            
            if (savedTopics) {
                const selectedValues = JSON.parse(savedTopics);
                document.querySelectorAll('.topic-checkbox').forEach(checkbox => {
                    if (selectedValues.includes(checkbox.value)) {
                        checkbox.checked = true;
                    }
                });
            }
            
            if (savedSubjects) {
                const selectedSubjectValues = JSON.parse(savedSubjects);
                document.querySelectorAll('.subject-checkbox').forEach(checkbox => {
                    if (selectedSubjectValues.includes(checkbox.value)) {
                        checkbox.checked = true;
                    }
                });
            }
            
            updateSelectionCount();
        }

        function goBack() {
            saveSelections();
            window.location.href = 'student-information.html';
        }

        function generateComments() {
            const studentData = JSON.parse(localStorage.getItem('studentData') || '{}');
            const selectedTopics = JSON.parse(localStorage.getItem('selectedSubjects') || '[]');
            const selectedSubjects = JSON.parse(localStorage.getItem('selectedSubjectTitles') || '[]');
            
            if (!studentData.studentName || !studentData.gender) {
                alert('Please complete student information first by going back to the previous page.');
                return;
            }
            
            if (selectedTopics.length === 0 && selectedSubjects.length === 0) {
                alert('Please select at least one topic or subject area before generating comments.');
                return;
            }            // Generate two different comments
            const comment1 = generateComment(studentData, selectedTopics, selectedSubjects, 1);
            const comment2 = generateComment(studentData, selectedTopics, selectedSubjects, 2);

            document.getElementById('commentText1').innerHTML = comment1;
            document.getElementById('commentText2').innerHTML = comment2;
            
            // Display word counts
            const wordCount1 = comment1.split(' ').length;
            const wordCount2 = comment2.split(' ').length;
            document.getElementById('wordCount1').textContent = `(${wordCount1} words)`;
            document.getElementById('wordCount2').textContent = `(${wordCount2} words)`;
            
            document.getElementById('generatedComments').style.display = 'block';
            
            // Scroll to comments
            document.getElementById('generatedComments').scrollIntoView({ behavior: 'smooth' });
        }        function generateComment(studentData, selectedTopics, selectedSubjects, variant) {
            const name = studentData.studentName;
            const pronoun = studentData.gender === 'he' ? 'He' : studentData.gender === 'she' ? 'She' : 'They';
            const possessive = studentData.gender === 'he' ? 'his' : studentData.gender === 'she' ? 'her' : 'their';
            const pronounLower = pronoun.toLowerCase();
            const verb = studentData.gender === 'they' ? 'have' : 'has';
            const isAre = studentData.gender === 'they' ? 'are' : 'is';
            const verbPast = studentData.gender === 'they' ? 'were' : 'was';
            
            // Enhanced performance descriptors based on overall attributes
            const overall = parseInt(studentData.overallAttributes || 5);
            const performanceData = {
                9: { desc: 'exceptional', adverb: 'consistently', achievement: 'outstanding progress' },
                8: { desc: 'excellent', adverb: 'confidently', achievement: 'remarkable growth' },
                7: { desc: 'very good', adverb: 'effectively', achievement: 'significant development' },
                6: { desc: 'good', adverb: 'steadily', achievement: 'positive progress' },
                5: { desc: 'satisfactory', adverb: 'gradually', achievement: 'steady improvement' },
                4: { desc: 'developing', adverb: 'persistently', achievement: 'encouraging development' },
                3: { desc: 'emerging', adverb: 'determinedly', achievement: 'foundational growth' }
            };
            const perf = performanceData[Math.min(overall, 9)] || performanceData[5];
            
            // Subject-specific vocabulary and descriptors
            const subjectDescriptors = {
                'English': ['letter recognition', 'early literacy skills', 'foundational reading concepts', 'alphabet knowledge'],
                'Phonics': ['sound awareness', 'phonemic skills', 'letter-sound connections', 'pronunciation development'],
                'Mathematics': ['number recognition', 'counting abilities', 'mathematical concepts', 'numerical understanding'],
                'Physical Education': ['motor skills', 'physical coordination', 'athletic abilities', 'movement activities'],
                'Social Studies': ['social awareness', 'environmental understanding', 'community concepts', 'cultural knowledge'],
                'Science': ['scientific curiosity', 'exploratory learning', 'investigative skills', 'natural phenomena understanding'],
                'Conversation': ['verbal communication', 'language expression', 'conversational skills', 'oral development']
            };

            // Opening variations
            const openings = [
                `${name} ${verb} demonstrated ${perf.desc} engagement throughout this reporting period.`,
                `${name} ${verb} shown ${perf.achievement} across multiple learning areas this term.`,
                `${name} ${verb} approached learning opportunities with ${perf.desc} enthusiasm and effort.`,
                `Throughout this term, ${name} ${verb} displayed ${perf.desc} participation in classroom activities.`
            ];
            
            let comment = openings[variant % openings.length] + ' ';

            // Enhanced strengths integration
            if (studentData.strengths) {
                const strengthTransitions = [
                    `${pronoun} particularly excels in`,
                    `Notable strengths are evident in`,
                    `${pronoun} demonstrates particular aptitude for`,
                    `Areas of strength include`
                ];
                comment += `${strengthTransitions[variant % strengthTransitions.length]} ${studentData.strengths.toLowerCase()}. `;
            }

            // Subject-specific commentary with educational vocabulary
            if (selectedSubjects.length > 0) {
                const subjectComments = [];
                selectedSubjects.forEach(subject => {
                    const descriptors = subjectDescriptors[subject] || ['academic skills'];
                    const descriptor = descriptors[Math.floor(Math.random() * descriptors.length)];
                    subjectComments.push(`${descriptor} in ${subject}`);
                });

                const transitions = [
                    `${pronoun} ${verb} made meaningful progress in`,
                    `Significant development ${verbPast} observed in`,
                    `${name} demonstrates growing competence in`,
                    `Progress ${verb} been particularly notable in`
                ];
                
                comment += `${transitions[variant % transitions.length]} ${subjectComments.join(', ')}. `;
            }

            // Specific topic integration with pedagogical language
            if (selectedTopics.length > 0) {
                const topicSample = selectedTopics.slice(0, Math.min(3, selectedTopics.length));
                const activityTransitions = [
                    `Specifically, ${pronounLower} ${verb} shown competency in activities such as`,
                    `Notable achievements include`,
                    `Particular success ${verbPast} evident in`,
                    `${pronoun} demonstrates skill development through`
                ];
                
                comment += `${activityTransitions[variant % activityTransitions.length]} ${topicSample.join(', ').toLowerCase()}. `;
            }

            // Growth areas with constructive language
            if (studentData.weaknesses) {
                const growthTransitions = [
                    `Areas identified for continued development include`,
                    `Future learning goals focus on`,
                    `Opportunities for growth lie in`,
                    `With ongoing support, ${pronounLower} will continue developing`
                ];
                comment += `${growthTransitions[variant % growthTransitions.length]} ${studentData.weaknesses.toLowerCase()}. `;
            }

            // Enhanced positive conclusions
            const conclusions = [
                `${name} ${isAre} a valued and enthusiastic member of our learning community who demonstrates great potential for continued academic growth.`,
                `With ${possessive} positive attitude and growing independence, ${name} ${isAre} well-positioned for future learning success.`,
                `${pronoun} ${isAre} a pleasure to teach and should feel proud of ${possessive} accomplishments and progress this term.`,
                `${name} approaches learning with curiosity and determination, qualities that will serve ${possessive.toLowerCase()} well in future educational endeavors.`,
                `The progress ${name} ${verb} made this term reflects ${possessive} dedication and readiness for new challenges ahead.`
            ];
            
            comment += conclusions[variant % conclusions.length];

            // Ensure comment meets 90-120 word target
            const wordCount = comment.split(' ').length;
            if (wordCount < 90) {
                // Add bridging sentence for length
                const bridges = [
                    ` ${pronoun} consistently demonstrates a positive learning attitude that enhances ${possessive} educational experience.`,
                    ` ${name}'s engagement in classroom activities reflects ${possessive} growing confidence and academic readiness.`,
                    ` The social and academic skills ${pronounLower} ${verb} developed will provide a strong foundation for future learning.`
                ];
                comment = comment.slice(0, -1) + bridges[variant % bridges.length] + comment.slice(-1);
            }

            return comment;
        }

        function selectComment(optionNumber) {
            // Remove previous selection
            document.querySelectorAll('.comment-option').forEach(el => el.classList.remove('selected'));
            
            // Add selection to clicked option
            document.getElementById(`comment${optionNumber}`).classList.add('selected');
            selectedComment = optionNumber;
        }

        function copySelectedComment() {
            if (!selectedComment) {
                alert('Please select a comment option first.');
                return;
            }
            
            const commentText = document.getElementById(`commentText${selectedComment}`).textContent;
            navigator.clipboard.writeText(commentText).then(() => {
                alert('Comment copied to clipboard!');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = commentText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Comment copied to clipboard!');
            });
        }

        function startOver() {
            if (confirm('This will clear all your selections and start over. Are you sure?')) {
                localStorage.removeItem('studentData');
                localStorage.removeItem('selectedSubjects');
                localStorage.removeItem('selectedSubjectTitles');
                window.location.href = 'student-information.html';
            }
        }

        // Add event listeners to all checkboxes
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('topic-checkbox') || e.target.classList.contains('subject-checkbox')) {
                updateSelectionCount();
                saveSelections();
            }
        });

        // Load saved selections on page load
        window.addEventListener('load', loadSelections);
    </script>
</body>
</html>
