<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kindergarten Rapport Generator - Enhanced</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a6da7;
            --primary-dark: #3a5a8f;
            --secondary-color: #5cb85c;
            --secondary-dark: #4cae4c;
            --background-color: #f5f7fa;
            --card-background: #ffffff;
            --text-color: #333333;
            --text-light: #666666;
            --border-color: #e0e0e0;
            --border-radius: 12px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --background-color: #1a1a2e;
            --card-background: #16213e;
            --text-color: #ffffff;
            --text-light: #b0b0b0;
            --border-color: #3a3a5c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: var(--transition);
        }        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .navbar-brand {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            text-decoration: none;
        }

        .navbar-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .theme-toggle, .save-btn, .load-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .theme-toggle:hover, .save-btn:hover, .load-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .container {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            transition: var(--transition);
        }

        .container:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 700;
            font-size: 2.5rem;
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-weight: 600;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--border-color);
            border-radius: 3px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.3s ease;
        }

        .student-info {
            background: linear-gradient(135deg, #f8f9ff, #e8f0ff);
            border: 2px solid var(--border-color);
            padding: 2rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
        }

        .photo-upload {
            text-align: center;
            margin-bottom: 2rem;
        }

        .photo-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--border-color);
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--background-color);
            overflow: hidden;
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-preview i {
            font-size: 3rem;
            color: var(--text-light);
        }

        .upload-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-btn:hover {
            background-color: var(--secondary-dark);
        }

        .student-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .subject-container {
            background: linear-gradient(135deg, #fff8f0, #fff0e6);
            border: 2px solid var(--border-color);
            padding: 2rem;
            border-radius: var(--border-radius);
        }        .subject-section {
            margin-bottom: 1.5rem;
            background-color: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
        }

        .subject-section:hover {
            border-color: var(--primary-color);
        }

        .subject-title {
            font-weight: 600;
            padding: 1rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            cursor: pointer;
            background: linear-gradient(135deg, #f8f9ff, #ffffff);
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .subject-title:hover {
            background: linear-gradient(135deg, #e8f0ff, #f0f7ff);
        }

        .subject-title.expanded {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .subject-content {
            padding: 1.5rem;
            display: none;
            background-color: var(--card-background);
        }

        .subject-content.expanded {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .subject-description {
            background: linear-gradient(135deg, #f0f8ff, #e6f3ff);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
            font-style: italic;
            color: var(--text-light);
        }

        .subject-row {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex: 1;
        }

        label {
            font-weight: 500;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        input[type="text"], input[type="email"], select, textarea {
            padding: 0.8rem;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            background-color: var(--card-background);
            color: var(--text-color);
            font-family: inherit;
            font-size: 1rem;
            transition: var(--transition);
        }

        input[type="text"]:focus, input[type="email"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 109, 167, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: linear-gradient(135deg, #f8f9ff, #ffffff);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: var(--border-color);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .slider::-webkit-slider-thumb:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: var(--primary-color);
            background: white;
            padding: 0.5rem;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }        .comment-container {
            margin-top: 2rem;
            background: linear-gradient(135deg, #f0fff4, #e6ffed);
            border: 2px solid var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 2rem;
        }

        .comment-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .comment-option {
            background-color: var(--card-background);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            transition: var(--transition);
        }

        .comment-option:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .comment-box {
            background-color: var(--card-background);
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 8px;
            min-height: 200px;
            font-size: 1rem;
            line-height: 1.6;
            position: relative;
        }

        .word-count {
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-light);
            background: rgba(255, 255, 255, 0.8);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 109, 167, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary-color), var(--secondary-dark));
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(92, 184, 92, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }

        .copy-button {
            background: linear-gradient(135deg, var(--secondary-color), var(--secondary-dark));
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .copy-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(92, 184, 92, 0.3);
        }

        .toggle-icon {
            margin-right: 0.5rem;
            transition: transform 0.3s ease;
            font-size: 0.8rem;
        }

        .expanded .toggle-icon {
            transform: rotate(90deg);
        }

        .strength-weakness {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .behavioral-section {
            background: linear-gradient(135deg, #fff5f5, #ffe6e6);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .behavioral-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--card-background), #f8f9fa);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 0.5rem;
        }

        .checkbox-custom {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            margin-right: 0.5rem;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
        }

        .checkbox-custom:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .checkbox-custom:checked::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--secondary-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #dc3545;
        }

        footer {
            margin-top: 3rem;
            text-align: center;
            color: var(--text-light);
            font-size: 0.9rem;
            padding: 2rem;
            border-top: 1px solid var(--border-color);
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }
            
            .navbar-content {
                padding: 0 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .student-grid {
                grid-template-columns: 1fr;
            }
            
            .comment-options {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .navbar-controls {
                flex-direction: row;
                gap: 0.5rem;
            }
        }

        .export-options {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .quick-fill {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .quick-fill-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .quick-fill-btn {
            background: #ffc107;
            color: #000;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: var(--transition);
        }

        .quick-fill-btn:hover {
            background: #ffb300;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="#" class="navbar-brand">
                <i class="fas fa-graduation-cap"></i> Kindergarten Rapport Generator
            </a>
            <div class="navbar-controls">
                <button class="load-btn" onclick="loadStudentData()">
                    <i class="fas fa-folder-open"></i> Load
                </button>
                <button class="save-btn" onclick="saveStudentData()">
                    <i class="fas fa-save"></i> Save
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>        <div class="container">
            <h1><i class="fas fa-child"></i> Kindergarten Rapport Generator</h1>
            
            <div class="student-info">
                <h2><i class="fas fa-user"></i> Student Information</h2>
                
                <div class="photo-upload">
                    <div class="photo-preview" id="photo-preview">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <input type="file" id="photo-input" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
                    <button class="upload-btn" onclick="document.getElementById('photo-input').click()">
                        <i class="fas fa-camera"></i> Upload Photo
                    </button>
                </div>

                <div class="student-grid">
                    <div class="form-group">
                        <label for="student-name">Student Name *</label>
                        <input type="text" id="student-name" placeholder="Enter student's full name" required>
                    </div>
                    <div class="form-group">
                        <label for="student-gender">Gender</label>
                        <select id="student-gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="student-age">Age</label>
                        <input type="number" id="student-age" min="3" max="7" placeholder="Age">
                    </div>
                    <div class="form-group">
                        <label for="student-class">Class/Grade</label>
                        <input type="text" id="student-class" placeholder="e.g., Kindergarten A">
                    </div>
                    <div class="form-group">
                        <label for="teacher-name">Teacher Name</label>
                        <input type="text" id="teacher-name" placeholder="Your name">
                    </div>
                    <div class="form-group">
                        <label for="report-period">Report Period</label>
                        <select id="report-period">
                            <option value="term1">Term 1</option>
                            <option value="term2">Term 2</option>
                            <option value="term3">Term 3</option>
                            <option value="semester1">Semester 1</option>
                            <option value="semester2">Semester 2</option>
                            <option value="annual">Annual Report</option>
                        </select>
                    </div>
                </div>

                <div class="strength-weakness">
                    <div class="form-group">
                        <label for="strengths">Strengths</label>
                        <textarea id="strengths" placeholder="List the student's key strengths and positive attributes"></textarea>
                        <div class="quick-fill">
                            <small>Quick fill suggestions:</small>
                            <div class="quick-fill-buttons">
                                <button class="quick-fill-btn" onclick="addQuickText('strengths', 'Creative and imaginative')">Creative</button>
                                <button class="quick-fill-btn" onclick="addQuickText('strengths', 'Helpful to classmates')">Helpful</button>
                                <button class="quick-fill-btn" onclick="addQuickText('strengths', 'Good listener')">Good listener</button>
                                <button class="quick-fill-btn" onclick="addQuickText('strengths', 'Follows instructions well')">Follows instructions</button>
                                <button class="quick-fill-btn" onclick="addQuickText('strengths', 'Curious about learning')">Curious</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="weaknesses">Areas for Improvement</label>
                        <textarea id="weaknesses" placeholder="Areas where the student could improve or needs support"></textarea>
                        <div class="quick-fill">
                            <small>Quick fill suggestions:</small>
                            <div class="quick-fill-buttons">
                                <button class="quick-fill-btn" onclick="addQuickText('weaknesses', 'Needs encouragement to participate')">Participation</button>
                                <button class="quick-fill-btn" onclick="addQuickText('weaknesses', 'Could improve focus during activities')">Focus</button>
                                <button class="quick-fill-btn" onclick="addQuickText('weaknesses', 'Needs practice with fine motor skills')">Fine motor skills</button>
                                <button class="quick-fill-btn" onclick="addQuickText('weaknesses', 'Could benefit from more independent work')">Independence</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="overall-display">7</div>
                        <div class="stat-label">Overall Performance</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="shyness-display">5</div>
                        <div class="stat-label">Social Confidence</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="selected-subjects">0</div>
                        <div class="stat-label">Selected Subjects</div>
                    </div>
                </div>

                <div class="subject-row">
                    <div class="form-group">
                        <label for="overall-attributes">Overall Performance (0-10)</label>
                        <div class="slider-container">
                            <input type="range" id="overall-attributes" class="slider" min="0" max="10" value="7">
                            <span class="slider-value" id="overall-attributes-value">7</span>
                        </div>
                    </div>
                </div>
                <div class="subject-row">
                    <div class="form-group">
                        <label for="shyness">Social Confidence (0-10) - Higher = More Confident</label>
                        <div class="slider-container">
                            <input type="range" id="shyness" class="slider" min="0" max="10" value="5">
                            <span class="slider-value" id="shyness-value">5</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="behavioral-section">
                <h2><i class="fas fa-heart"></i> Behavioral Observations</h2>
                <div class="behavioral-grid">
                    <div class="form-group">
                        <label for="cooperation">Cooperation (0-5)</label>
                        <div class="slider-container">
                            <input type="range" id="cooperation" class="slider" min="0" max="5" value="3">
                            <span class="slider-value" id="cooperation-value">3</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="attention">Attention Span (0-5)</label>
                        <div class="slider-container">
                            <input type="range" id="attention" class="slider" min="0" max="5" value="3">
                            <span class="slider-value" id="attention-value">3</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="independence">Independence (0-5)</label>
                        <div class="slider-container">
                            <input type="range" id="independence" class="slider" min="0" max="5" value="3">
                            <span class="slider-value" id="independence-value">3</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="creativity">Creativity (0-5)</label>
                        <div class="slider-container">
                            <input type="range" id="creativity" class="slider" min="0" max="5" value="3">
                            <span class="slider-value" id="creativity-value">3</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <h2><i class="fas fa-book"></i> Subject Performance</h2>
                
                <!-- ENGLISH -->            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="english-checkbox" class="checkbox-custom">
                    <label for="english-checkbox">ENGLISH</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Draw lines to match the letter with the correct picture, Trace the letter and color. Draw lines to match the same letters. Vocabulary: A-Ant, B-Bee, C-Cat</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="english-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="english-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="english-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="english-notes">Additional Notes</label>
                            <textarea id="english-notes" placeholder="Enter specific observations, achievements, or areas needing attention for English"></textarea>
                        </div>
                    </div>
                </div>
            </div>            
            <!-- PHONICS -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="phonics-checkbox" class="checkbox-custom">
                    <label for="phonics-checkbox">PHONICS</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Letter A-E, Revision A/B/C. Vocabulary: Annie Ant-Axe, Benny Bear-Ball, Candy Cat-Cut, Danny Dog-Dig, Eddie Elephant-Egg.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="phonics-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="phonics-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="phonics-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="phonics-notes">Additional Notes</label>
                            <textarea id="phonics-notes" placeholder="Enter specific observations for Phonics"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- MATHEMATICS -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="mathematics-checkbox" class="checkbox-custom">
                    <label for="mathematics-checkbox">MATHEMATICS</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Count from 1-10. Trace numbers 1-3 following the dotted line and colouring the correct amount of pictures. Place the correct amount of pictures in the boxes. Counting from 1-10 with our fingers. Draw lines to match the correct number to the pictures.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="mathematics-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="mathematics-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="mathematics-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="mathematics-notes">Additional Notes</label>
                            <textarea id="mathematics-notes" placeholder="Enter specific observations for Mathematics"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- I.Q -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="iq-checkbox" class="checkbox-custom">
                    <label for="iq-checkbox">I.Q</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Animal and their food and different food that animals can eat, Shapes and colours, Objects in the Dining Room/ Bathroom.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="iq-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="iq-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="iq-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="iq-notes">Additional Notes</label>
                            <textarea id="iq-notes" placeholder="Enter specific observations for I.Q"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SOCIAL STUDIES -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="social-studies-checkbox" class="checkbox-custom">
                    <label for="social-studies-checkbox">SOCIAL STUDIES</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Farm animals- characteristic, abilities, sounds, food, offsprings (babies), My Body- My face</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="social-studies-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="social-studies-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="social-studies-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="social-studies-notes">Additional Notes</label>
                            <textarea id="social-studies-notes" placeholder="Enter specific observations for Social Studies"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SCIENCE -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="science-checkbox" class="checkbox-custom">
                    <label for="science-checkbox">SCIENCE</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Floating Sinking eggs- Introducing the concept of buoyancy and how salt affects water density. Green beans dancing (soda)-Introducing the effects of gas buoyancy with soda water.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="science-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="science-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="science-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="science-notes">Additional Notes</label>
                            <textarea id="science-notes" placeholder="Enter specific observations for Science"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- CONVERSATION -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="conversation-checkbox" class="checkbox-custom">
                    <label for="conversation-checkbox">CONVERSATION</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>How old are you? - I am three years old. What do you do in the morning? – I wake up. What do you do after eating? -I brush my teeth.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="conversation-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="conversation-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="conversation-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="conversation-notes">Additional Notes</label>
                            <textarea id="conversation-notes" placeholder="Enter specific observations for Conversation"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ARTS -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="arts-checkbox" class="checkbox-custom">
                    <label for="arts-checkbox">ARTS</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Paper caterpillar making, Origami- Fox, Frog, Ice-cream. Cotton ball sheep. Wobbly crab.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="arts-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="arts-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="arts-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="arts-notes">Additional Notes</label>
                            <textarea id="arts-notes" placeholder="Enter specific observations for Arts"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- PHYSICAL EDUCATION -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="pe-checkbox" class="checkbox-custom">
                    <label for="pe-checkbox">PHYSICAL EDUCATION</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Pass the ball, Roll the ball, Drop and catch the ball, racing game, under the arches, football</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="pe-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="pe-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="pe-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="pe-notes">Additional Notes</label>
                            <textarea id="pe-notes" placeholder="Enter specific observations for Physical Education"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- PUPPET SHOW -->
            <div class="subject-section">
                <div class="subject-title" onclick="toggleSubject(this)">
                    <span class="toggle-icon">▶</span>
                    <input type="checkbox" id="puppet-checkbox" class="checkbox-custom">
                    <label for="puppet-checkbox">PUPPET SHOW</label>
                </div>
                <div class="subject-content">
                    <div class="subject-description">
                        <p>Three little pigs, The Red riding hood, the panicked rabbit, Noonid doesn't eat vegetables. Lion and the Mouse.</p>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="puppet-performance">Performance (0-5)</label>
                            <div class="slider-container">
                                <input type="range" id="puppet-performance" class="slider" min="0" max="5" value="3">
                                <span class="slider-value" id="puppet-performance-value">3</span>
                            </div>
                        </div>
                    </div>
                    <div class="subject-row">
                        <div class="form-group">
                            <label for="puppet-notes">Additional Notes</label>
                            <textarea id="puppet-notes" placeholder="Enter specific observations for Puppet Show"></textarea>
                        </div>
                    </div>
                </div>
            </div></div>
        
        <div class="buttons">
            <button class="btn btn-primary" id="generate-button">
                <i class="fas fa-magic"></i> Generate Comments
            </button>
            <button class="btn btn-outline" onclick="clearAll()">
                <i class="fas fa-refresh"></i> Clear All
            </button>
            <button class="btn btn-outline" onclick="fillSampleData()">
                <i class="fas fa-user"></i> Load Sample
            </button>
        </div>
        
        <div class="comment-container" id="comment-container" style="display: none;">
            <h2><i class="fas fa-comments"></i> Generated Comments</h2>
            <div class="comment-options">
                <div class="comment-option">
                    <div class="comment-title"><i class="fas fa-file-alt"></i> Comment Option 1:</div>
                    <div class="comment-box" id="comment1">
                        <div class="word-count" id="word-count-1">0 words</div>
                    </div>
                    <div class="buttons">
                        <button class="copy-button" onclick="copyComment('comment1')">
                            <i class="fas fa-copy"></i> Copy Comment 1
                        </button>
                        <button class="btn btn-outline" onclick="editComment('comment1')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
                <div class="comment-option">
                    <div class="comment-title"><i class="fas fa-file-alt"></i> Comment Option 2:</div>
                    <div class="comment-box" id="comment2">
                        <div class="word-count" id="word-count-2">0 words</div>
                    </div>
                    <div class="buttons">
                        <button class="copy-button" onclick="copyComment('comment2')">
                            <i class="fas fa-copy"></i> Copy Comment 2
                        </button>
                        <button class="btn btn-outline" onclick="editComment('comment2')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="export-options">
                <button class="btn btn-secondary" onclick="exportToPDF()">
                    <i class="fas fa-file-pdf"></i> Export to PDF
                </button>
                <button class="btn btn-secondary" onclick="exportToWord()">
                    <i class="fas fa-file-word"></i> Export to Word
                </button>
                <button class="btn btn-secondary" onclick="printReport()">
                    <i class="fas fa-print"></i> Print Report
                </button>
                <button class="btn btn-outline" onclick="emailReport()">
                    <i class="fas fa-envelope"></i> Email Report
                </button>
            </div>
        </div>

        <footer>
            <p><i class="fas fa-heart"></i> Kindergarten Rapport Generator - Enhanced Version | Created by AI Assistant</p>
            <p>Designed to help teachers create meaningful, personalized student reports efficiently</p>
        </footer>
    </div>

    <!-- Notification container -->
    <div class="notification" id="notification"></div>

    <script>        // Enhanced Kindergarten Rapport Generator JavaScript
        
        // Global variables
        let currentTheme = 'light';
        let studentData = {};
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            loadTheme();
            setupEventListeners();
            updateProgress();
        });

        function initializeApp() {
            // Initialize all slider value displays
            document.querySelectorAll('.slider').forEach(slider => {
                const valueDisplay = document.getElementById(`${slider.id}-value`);
                slider.addEventListener('input', () => {
                    valueDisplay.textContent = slider.value;
                    updateStats();
                    updateProgress();
                });
            });

            // Initialize checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    updateStats();
                    updateProgress();
                });
            });

            // Initialize form inputs
            document.querySelectorAll('input, textarea, select').forEach(input => {
                input.addEventListener('input', updateProgress);
            });
        }

        function setupEventListeners() {
            // Generate button
            document.getElementById('generate-button').addEventListener('click', function() {
                const studentName = document.getElementById('student-name').value.trim();
                if (!studentName) {
                    showNotification('Please enter the student\'s name!', 'error');
                    return;
                }
                
                showLoading();
                setTimeout(() => {
                    generateComments();
                    hideLoading();
                    document.getElementById('comment-container').style.display = 'block';
                    document.getElementById('comment-container').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 1000);
            });
        }

        function updateStats() {
            // Update overall performance display
            const overall = document.getElementById('overall-attributes').value;
            document.getElementById('overall-display').textContent = overall;
            
            // Update social confidence display (inverted shyness)
            const confidence = 10 - document.getElementById('shyness').value;
            document.getElementById('shyness-display').textContent = confidence;
            
            // Update selected subjects count
            const selectedCount = document.querySelectorAll('input[type="checkbox"]:checked').length;
            document.getElementById('selected-subjects').textContent = selectedCount;
        }

        function updateProgress() {
            const requiredFields = ['student-name'];
            const allFields = ['student-name', 'student-gender', 'student-age', 'teacher-name', 'strengths', 'weaknesses'];
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            
            let filledRequired = 0;
            let filledOptional = 0;
            let selectedSubjects = 0;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field && field.value.trim()) filledRequired++;
            });
            
            allFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field && field.value.trim()) filledOptional++;
            });
            
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) selectedSubjects++;
            });
            
            const totalScore = (filledRequired * 3) + (filledOptional * 2) + (selectedSubjects * 1);
            const maxScore = (requiredFields.length * 3) + (allFields.length * 2) + (checkboxes.length * 1);
            const progress = Math.min((totalScore / maxScore) * 100, 100);
            
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        // Photo upload functionality
        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('photo-preview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="Student photo">`;
                };
                reader.readAsDataURL(file);
            }
        }

        // Quick fill functionality
        function addQuickText(fieldId, text) {
            const field = document.getElementById(fieldId);
            const currentValue = field.value.trim();
            if (currentValue) {
                field.value = currentValue + ', ' + text;
            } else {
                field.value = text;
            }
            updateProgress();
        }

        // Theme toggle
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            const themeIcon = document.querySelector('.theme-toggle i');
            themeIcon.className = currentTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            
            localStorage.setItem('theme', currentTheme);
            showNotification(`Switched to ${currentTheme} mode`);
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                currentTheme = savedTheme;
                document.documentElement.setAttribute('data-theme', currentTheme);
                const themeIcon = document.querySelector('.theme-toggle i');
                themeIcon.className = currentTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            }
        }

        // Enhanced subject toggle with animation
        function toggleSubject(element) {
            const content = element.nextElementSibling;
            const isExpanded = element.classList.contains('expanded');
            
            if (isExpanded) {
                element.classList.remove('expanded');
                content.classList.remove('expanded');
                content.style.display = 'none';
            } else {
                element.classList.add('expanded');
                content.style.display = 'block';
                content.classList.add('expanded');
            }
        }

        // Enhanced copy functionality
        function copyComment(commentId) {
            const commentElement = document.getElementById(commentId);
            const commentText = commentElement.textContent.replace(/\d+ words$/, '').trim();
            
            navigator.clipboard.writeText(commentText).then(() => {
                showNotification('Comment copied to clipboard!');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = commentText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Comment copied to clipboard!');
            });
        }

        // Edit comment functionality
        function editComment(commentId) {
            const commentElement = document.getElementById(commentId);
            const currentText = commentElement.textContent.replace(/\d+ words$/, '').trim();
            
            const textarea = document.createElement('textarea');
            textarea.value = currentText;
            textarea.style.width = '100%';
            textarea.style.minHeight = '200px';
            textarea.style.padding = '1rem';
            textarea.style.border = '2px solid var(--primary-color)';
            textarea.style.borderRadius = '8px';
            textarea.style.fontFamily = 'inherit';
            textarea.style.fontSize = '1rem';
            
            const saveBtn = document.createElement('button');
            saveBtn.className = 'btn btn-primary';
            saveBtn.innerHTML = '<i class="fas fa-save"></i> Save Changes';
            saveBtn.style.marginTop = '1rem';
            
            const cancelBtn = document.createElement('button');
            cancelBtn.className = 'btn btn-outline';
            cancelBtn.innerHTML = '<i class="fas fa-times"></i> Cancel';
            cancelBtn.style.marginTop = '1rem';
            cancelBtn.style.marginLeft = '1rem';
            
            const buttonsDiv = document.createElement('div');
            buttonsDiv.appendChild(saveBtn);
            buttonsDiv.appendChild(cancelBtn);
            
            commentElement.innerHTML = '';
            commentElement.appendChild(textarea);
            commentElement.appendChild(buttonsDiv);
            
            saveBtn.onclick = () => {
                const newText = textarea.value;
                commentElement.innerHTML = newText + `<div class="word-count">${countWords(newText)} words</div>`;
                showNotification('Comment updated successfully!');
            };
            
            cancelBtn.onclick = () => {
                commentElement.innerHTML = currentText + `<div class="word-count">${countWords(currentText)} words</div>`;
            };
            
            textarea.focus();
        }

        // Word count utility
        function countWords(text) {
            return text.trim().split(/\s+/).filter(word => word.length > 0).length;
        }

        // Update word counts for comments
        function updateWordCounts() {
            ['comment1', 'comment2'].forEach(commentId => {
                const commentElement = document.getElementById(commentId);
                const text = commentElement.textContent.replace(/\d+ words$/, '').trim();
                const wordCount = countWords(text);
                const wordCountElement = commentElement.querySelector('.word-count');
                if (wordCountElement) {
                    wordCountElement.textContent = `${wordCount} words`;
                    wordCountElement.style.color = wordCount >= 200 && wordCount <= 300 ? '#28a745' : '#ffc107';
                }
            });
        }

        // Save and load functionality
        function saveStudentData() {
            const data = {
                studentName: document.getElementById('student-name').value,
                gender: document.getElementById('student-gender').value,
                age: document.getElementById('student-age').value,
                studentClass: document.getElementById('student-class').value,
                teacherName: document.getElementById('teacher-name').value,
                reportPeriod: document.getElementById('report-period').value,
                strengths: document.getElementById('strengths').value,
                weaknesses: document.getElementById('weaknesses').value,
                overallAttributes: document.getElementById('overall-attributes').value,
                shyness: document.getElementById('shyness').value,
                cooperation: document.getElementById('cooperation').value,
                attention: document.getElementById('attention').value,
                independence: document.getElementById('independence').value,
                creativity: document.getElementById('creativity').value,
                subjects: {}
            };
            
            // Save subject data
            const subjects = ['english', 'phonics', 'mathematics', 'iq', 'social-studies', 'science', 'conversation', 'arts', 'pe', 'puppet'];
            subjects.forEach(subject => {
                data.subjects[subject] = {
                    checked: document.getElementById(`${subject}-checkbox`).checked,
                    performance: document.getElementById(`${subject}-performance`).value,
                    notes: document.getElementById(`${subject}-notes`).value
                };
            });
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${data.studentName || 'student'}_rapport_data.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Student data saved successfully!');
        }

        function loadStudentData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            
                            // Load basic student info
                            document.getElementById('student-name').value = data.studentName || '';
                            document.getElementById('student-gender').value = data.gender || 'male';
                            document.getElementById('student-age').value = data.age || '';
                            document.getElementById('student-class').value = data.studentClass || '';
                            document.getElementById('teacher-name').value = data.teacherName || '';
                            document.getElementById('report-period').value = data.reportPeriod || 'term1';
                            document.getElementById('strengths').value = data.strengths || '';
                            document.getElementById('weaknesses').value = data.weaknesses || '';
                            document.getElementById('overall-attributes').value = data.overallAttributes || 7;
                            document.getElementById('shyness').value = data.shyness || 5;
                            document.getElementById('cooperation').value = data.cooperation || 3;
                            document.getElementById('attention').value = data.attention || 3;
                            document.getElementById('independence').value = data.independence || 3;
                            document.getElementById('creativity').value = data.creativity || 3;
                            
                            // Load subject data
                            if (data.subjects) {
                                Object.keys(data.subjects).forEach(subject => {
                                    const subjectData = data.subjects[subject];
                                    const checkbox = document.getElementById(`${subject}-checkbox`);
                                    const performance = document.getElementById(`${subject}-performance`);
                                    const notes = document.getElementById(`${subject}-notes`);
                                    
                                    if (checkbox) checkbox.checked = subjectData.checked || false;
                                    if (performance) performance.value = subjectData.performance || 3;
                                    if (notes) notes.value = subjectData.notes || '';
                                });
                            }
                            
                            updateStats();
                            updateProgress();
                            initializeApp(); // Reinitialize sliders
                            showNotification('Student data loaded successfully!');
                            
                        } catch (error) {
                            showNotification('Error loading file. Please check the file format.', 'error');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        // Sample data for testing
        function fillSampleData() {
            document.getElementById('student-name').value = 'Emma Johnson';
            document.getElementById('student-gender').value = 'female';
            document.getElementById('student-age').value = '5';
            document.getElementById('student-class').value = 'Kindergarten A';
            document.getElementById('teacher-name').value = 'Ms. Sarah Wilson';
            document.getElementById('strengths').value = 'Creative and imaginative, Helpful to classmates, Good listener';
            document.getElementById('weaknesses').value = 'Needs encouragement to participate in group activities';
            document.getElementById('overall-attributes').value = '8';
            document.getElementById('shyness').value = '3';
            
            // Check some subjects
            document.getElementById('english-checkbox').checked = true;
            document.getElementById('mathematics-checkbox').checked = true;
            document.getElementById('arts-checkbox').checked = true;
            
            updateStats();
            updateProgress();
            initializeApp();
            showNotification('Sample data loaded!');
        }

        // Clear all data
        function clearAll() {
            if (confirm('Are you sure you want to clear all data? This action cannot be undone.')) {
                document.querySelectorAll('input[type="text"], input[type="number"], textarea, select').forEach(field => {
                    field.value = '';
                });
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                document.querySelectorAll('.slider').forEach(slider => {
                    slider.value = slider.getAttribute('value') || 3;
                });
                
                document.getElementById('photo-preview').innerHTML = '<i class="fas fa-user-circle"></i>';
                document.getElementById('comment-container').style.display = 'none';
                
                updateStats();
                updateProgress();
                initializeApp();
                showNotification('All data cleared!');
            }
        }

        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Loading states
        function showLoading() {
            const button = document.getElementById('generate-button');
            button.innerHTML = '<div class="loading-spinner"></div> Generating...';
            button.disabled = true;
        }

        function hideLoading() {
            const button = document.getElementById('generate-button');
            button.innerHTML = '<i class="fas fa-magic"></i> Generate Comments';
            button.disabled = false;
        }

        // Export functionality
        function exportToPDF() {
            showNotification('PDF export feature coming soon!');
        }

        function exportToWord() {
            showNotification('Word export feature coming soon!');
        }

        function printReport() {
            const printContent = document.getElementById('comment-container').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Student Report - ${document.getElementById('student-name').value}</title>
                    <style>
                        body { font-family: 'Times New Roman', serif; margin: 2cm; }
                        .comment-box { border: 1px solid #ccc; padding: 1rem; margin: 1rem 0; }
                        .comment-title { font-weight: bold; margin-bottom: 0.5rem; }
                        .word-count { display: none; }
                    </style>
                </head>
                <body>
                    <h1>Kindergarten Report - ${document.getElementById('student-name').value}</h1>
                    <p><strong>Teacher:</strong> ${document.getElementById('teacher-name').value}</p>
                    <p><strong>Class:</strong> ${document.getElementById('student-class').value}</p>
                    <p><strong>Period:</strong> ${document.getElementById('report-period').value}</p>
                    ${printContent}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function emailReport() {
            const studentName = document.getElementById('student-name').value;
            const subject = `Kindergarten Report for ${studentName}`;
            const body = `Please find the kindergarten report for ${studentName} attached.`;
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }        
        // Enhanced comment generation system
        function generateComments() {
            // Get student information
            const studentName = document.getElementById('student-name').value;
            const gender = document.getElementById('student-gender').value;
            const age = document.getElementById('student-age').value;
            const strengths = document.getElementById('strengths').value;
            const weaknesses = document.getElementById('weaknesses').value;
            const overallAttributes = parseInt(document.getElementById('overall-attributes').value);
            const socialConfidence = 10 - parseInt(document.getElementById('shyness').value);
            const cooperation = parseInt(document.getElementById('cooperation').value);
            const attention = parseInt(document.getElementById('attention').value);
            const independence = parseInt(document.getElementById('independence').value);
            const creativity = parseInt(document.getElementById('creativity').value);
            
            // Get selected subjects and their performance
            const subjects = [
                { name: 'English', id: 'english', checked: document.getElementById('english-checkbox').checked, performance: parseInt(document.getElementById('english-performance').value), notes: document.getElementById('english-notes').value },
                { name: 'Phonics', id: 'phonics', checked: document.getElementById('phonics-checkbox').checked, performance: parseInt(document.getElementById('phonics-performance').value), notes: document.getElementById('phonics-notes').value },
                { name: 'Mathematics', id: 'mathematics', checked: document.getElementById('mathematics-checkbox').checked, performance: parseInt(document.getElementById('mathematics-performance').value), notes: document.getElementById('mathematics-notes').value },
                { name: 'I.Q', id: 'iq', checked: document.getElementById('iq-checkbox').checked, performance: parseInt(document.getElementById('iq-performance').value), notes: document.getElementById('iq-notes').value },
                { name: 'Social Studies', id: 'social-studies', checked: document.getElementById('social-studies-checkbox').checked, performance: parseInt(document.getElementById('social-studies-performance').value), notes: document.getElementById('social-studies-notes').value },
                { name: 'Science', id: 'science', checked: document.getElementById('science-checkbox').checked, performance: parseInt(document.getElementById('science-performance').value), notes: document.getElementById('science-notes').value },
                { name: 'Conversation', id: 'conversation', checked: document.getElementById('conversation-checkbox').checked, performance: parseInt(document.getElementById('conversation-performance').value), notes: document.getElementById('conversation-notes').value },
                { name: 'Arts', id: 'arts', checked: document.getElementById('arts-checkbox').checked, performance: parseInt(document.getElementById('arts-performance').value), notes: document.getElementById('arts-notes').value },
                { name: 'Physical Education', id: 'pe', checked: document.getElementById('pe-checkbox').checked, performance: parseInt(document.getElementById('pe-performance').value), notes: document.getElementById('pe-notes').value },
                { name: 'Puppet Show', id: 'puppet', checked: document.getElementById('puppet-checkbox').checked, performance: parseInt(document.getElementById('puppet-performance').value), notes: document.getElementById('puppet-notes').value }
            ];
            
            // Filter selected subjects
            const selectedSubjects = subjects.filter(subject => subject.checked);
            
            // Generate enhanced AI comments
            const comment1 = generateEnhancedComment1(studentName, gender, age, strengths, weaknesses, overallAttributes, socialConfidence, cooperation, attention, independence, creativity, selectedSubjects);
            const comment2 = generateEnhancedComment2(studentName, gender, age, strengths, weaknesses, overallAttributes, socialConfidence, cooperation, attention, independence, creativity, selectedSubjects);
            
            // Set comments and update word counts
            document.getElementById('comment1').innerHTML = comment1 + '<div class="word-count"></div>';
            document.getElementById('comment2').innerHTML = comment2 + '<div class="word-count"></div>';
            
            updateWordCounts();
        }

        function generateEnhancedComment1(studentName, gender, age, strengths, weaknesses, overallAttributes, socialConfidence, cooperation, attention, independence, creativity, selectedSubjects) {
            const pronouns = {
                male: { subject: 'he', object: 'him', possessive: 'his', reflexive: 'himself' },
                female: { subject: 'she', object: 'her', possessive: 'her', reflexive: 'herself' },
                other: { subject: 'they', object: 'them', possessive: 'their', reflexive: 'themselves' }
            };
            const pronoun = pronouns[gender] || pronouns.other;
            
            // Performance descriptors with more variety
            const performanceDescriptors = {
                0: ['is beginning to explore', 'needs significant support with', 'is developing foundational skills in'],
                1: ['is learning to understand', 'shows emerging skills in', 'is building confidence in'],
                2: ['demonstrates developing abilities in', 'is making steady progress in', 'shows growing competence in'],
                3: ['performs well in', 'demonstrates good understanding of', 'shows solid skills in'],
                4: ['excels in', 'displays strong abilities in', 'demonstrates excellent grasp of'],
                5: ['shows exceptional talent in', 'masters concepts in', 'displays outstanding achievement in']
            };
            
            // Behavioral trait descriptors
            const behavioralTraits = {
                cooperation: {
                    low: 'is developing collaborative skills',
                    medium: 'works well with others',
                    high: 'demonstrates excellent teamwork and cooperation'
                },
                attention: {
                    low: 'is building focus and concentration skills',
                    medium: 'maintains good attention during activities',
                    high: 'shows exceptional focus and sustained attention'
                },
                independence: {
                    low: 'benefits from guidance and support',
                    medium: 'demonstrates growing independence',
                    high: 'works independently with confidence'
                },
                creativity: {
                    low: 'is exploring creative expression',
                    medium: 'shows creative thinking in activities',
                    high: 'demonstrates exceptional creativity and imagination'
                }
            };
            
            function getTraitLevel(value) {
                if (value <= 2) return 'low';
                if (value <= 3) return 'medium';
                return 'high';
            }
            
            // Start building the comment
            let comment = `${studentName} is a `;
            
            // Add age-appropriate descriptor
            const ageDescriptors = {
                3: 'curious and energetic young learner',
                4: 'developing and enthusiastic student',
                5: 'bright and engaged kindergartener',
                6: 'mature and capable student',
                7: 'advanced and thoughtful learner'
            };
            comment += ageDescriptors[age] || 'wonderful young student';
            
            // Add personality traits based on social confidence
            if (socialConfidence >= 7) {
                comment += ` who approaches new experiences with confidence and enthusiasm. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} `;
            } else if (socialConfidence >= 4) {
                comment += ` who balances thoughtful observation with active participation. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} `;
            } else {
                comment += ` who is gradually building confidence in social situations. With gentle encouragement, ${pronoun.subject} `;
            }
            
            // Add behavioral observations
            const behaviorTraits = [
                behavioralTraits.cooperation[getTraitLevel(cooperation)],
                behavioralTraits.attention[getTraitLevel(attention)],
                behavioralTraits.independence[getTraitLevel(independence)]
            ];
            comment += `${behaviorTraits[Math.floor(Math.random() * behaviorTraits.length)]} and `;
            comment += `${behavioralTraits.creativity[getTraitLevel(creativity)]}. `;
            
            // Add strengths if provided
            if (strengths.trim()) {
                const strengthsList = strengths.split(',').map(s => s.trim()).filter(s => s);
                if (strengthsList.length > 0) {
                    const selectedStrengths = strengthsList.slice(0, 2);
                    comment += `${pronoun.possessive.charAt(0).toUpperCase() + pronoun.possessive.slice(1)} particular strengths include ${selectedStrengths.join(' and ')}, which enhance ${pronoun.possessive} learning experience. `;
                }
            }
            
            // Add academic performance for selected subjects
            if (selectedSubjects.length > 0) {
                // Group subjects by performance level
                const highPerformance = selectedSubjects.filter(s => s.performance >= 4);
                const mediumPerformance = selectedSubjects.filter(s => s.performance >= 2 && s.performance < 4);
                const lowPerformance = selectedSubjects.filter(s => s.performance < 2);
                
                // High performance subjects
                if (highPerformance.length > 0) {
                    const subjects = highPerformance.slice(0, 2);
                    if (subjects.length === 1) {
                        const descriptor = performanceDescriptors[subjects[0].performance][Math.floor(Math.random() * 3)];
                        comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} ${descriptor} ${subjects[0].name}. `;
                    } else {
                        comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} demonstrates strong abilities in both ${subjects[0].name} and ${subjects[1].name}. `;
                    }
                }
                
                // Medium performance subjects
                if (mediumPerformance.length > 0) {
                    const subjects = mediumPerformance.slice(0, 2);
                    if (subjects.length === 1) {
                        const descriptor = performanceDescriptors[subjects[0].performance][Math.floor(Math.random() * 3)];
                        comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} ${descriptor} ${subjects[0].name}. `;
                    } else {
                        comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is making good progress in ${subjects[0].name} and ${subjects[1].name}. `;
                    }
                }
                
                // Add specific notes if available
                const subjectsWithNotes = selectedSubjects.filter(s => s.notes.trim());
                if (subjectsWithNotes.length > 0) {
                    const randomNote = subjectsWithNotes[Math.floor(Math.random() * subjectsWithNotes.length)];
                    comment += `In ${randomNote.name}, ${randomNote.notes} `;
                }
            }
            
            // Add areas for improvement if provided
            if (weaknesses.trim()) {
                comment += `Areas for continued growth include ${weaknesses.toLowerCase()}. With ongoing support and practice, ${pronoun.subject} will continue to develop these important skills. `;
            }
            
            // Add encouraging closing based on overall performance
            const closings = {
                high: [
                    `${studentName} consistently demonstrates excellent effort and a positive attitude toward learning. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is a joy to have in our classroom community.`,
                    `I am impressed by ${studentName}'s dedication to learning and ${pronoun.possessive} kind interactions with classmates. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is making excellent progress.`,
                    `${studentName} brings enthusiasm and curiosity to every learning opportunity. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is well-prepared for continued academic success.`
                ],
                medium: [
                    `${studentName} is making steady progress and shows a genuine interest in learning. I look forward to ${pronoun.possessive} continued growth.`,
                    `With consistent effort, ${studentName} continues to develop important foundational skills. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is a valued member of our class.`,
                    `${studentName} demonstrates growing confidence in ${pronoun.possessive} abilities and is developing strong learning habits.`
                ],
                low: [
                    `${studentName} is building important foundational skills with determination. With continued support, ${pronoun.subject} will achieve success.`,
                    `I appreciate ${studentName}'s efforts and positive attitude. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is making meaningful progress in ${pronoun.possessive} learning journey.`,
                    `${studentName} shows great potential and benefits from encouragement. I am confident in ${pronoun.possessive} ability to continue growing.`
                ]
            };
            
            let performanceLevel = 'medium';
            if (overallAttributes >= 8) performanceLevel = 'high';
            else if (overallAttributes <= 4) performanceLevel = 'low';
            
            const closingOptions = closings[performanceLevel];
            comment += closingOptions[Math.floor(Math.random() * closingOptions.length)];
            
            return comment;
        }

        function generateEnhancedComment2(studentName, gender, age, strengths, weaknesses, overallAttributes, socialConfidence, cooperation, attention, independence, creativity, selectedSubjects) {
            const pronouns = {
                male: { subject: 'he', object: 'him', possessive: 'his', reflexive: 'himself' },
                female: { subject: 'she', object: 'her', possessive: 'her', reflexive: 'herself' },
                other: { subject: 'they', object: 'them', possessive: 'their', reflexive: 'themselves' }
            };
            const pronoun = pronouns[gender] || pronouns.other;
            
            // Alternative comment structure focusing on different aspects
            let comment = `It has been a pleasure working with ${studentName} this term. `;
            
            // Start with overall classroom presence
            if (socialConfidence >= 7) {
                comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} brings positive energy to our classroom and readily engages with both peers and activities. `;
            } else if (socialConfidence >= 4) {
                comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} contributes thoughtfully to our classroom environment and is developing strong peer relationships. `;
            } else {
                comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is becoming more comfortable in our classroom environment and is gradually building social connections. `;
            }
            
            // Focus on learning approach and work habits
            const workHabits = [];
            if (attention >= 4) workHabits.push('maintains excellent focus during lessons');
            else if (attention >= 2) workHabits.push('shows good concentration skills');
            else workHabits.push('is developing attention and focus abilities');
            
            if (independence >= 4) workHabits.push('demonstrates strong independence in learning tasks');
            else if (independence >= 2) workHabits.push('is building independence in daily activities');
            else workHabits.push('benefits from guided support in learning activities');
            
            if (cooperation >= 4) workHabits.push('collaborates effectively with classmates');
            else if (cooperation >= 2) workHabits.push('is learning to work well with others');
            else workHabits.push('is developing collaborative skills');
            
            comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} ${workHabits.slice(0, 2).join(' and ')}. `;
            
            // Highlight creativity and problem-solving
            if (creativity >= 4) {
                comment += `${pronoun.possessive.charAt(0).toUpperCase() + pronoun.possessive.slice(1)} creative thinking and imaginative approach to activities consistently impresses both teachers and classmates. `;
            } else if (creativity >= 2) {
                comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} demonstrates creative thinking in various learning activities. `;
            } else {
                comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is exploring creative expression and developing ${pronoun.possessive} unique perspective. `;
            }
            
            // Academic achievements - focus on strongest areas first
            if (selectedSubjects.length > 0) {
                const sortedSubjects = selectedSubjects.sort((a, b) => b.performance - a.performance);
                const topSubjects = sortedSubjects.slice(0, 3);
                
                if (topSubjects.length > 0) {
                    comment += `Academically, ${studentName} shows particular aptitude in `;
                    
                    if (topSubjects.length === 1) {
                        comment += `${topSubjects[0].name}, where ${pronoun.subject} consistently demonstrates strong understanding and engagement. `;
                    } else if (topSubjects.length === 2) {
                        comment += `${topSubjects[0].name} and ${topSubjects[1].name}, consistently showing strong performance in these areas. `;
                    } else {
                        comment += `${topSubjects[0].name}, ${topSubjects[1].name}, and ${topSubjects[2].name}, demonstrating well-rounded academic development. `;
                    }
                }
                
                // Add progress notes for developing subjects
                const developingSubjects = selectedSubjects.filter(s => s.performance >= 2 && s.performance < 4);
                if (developingSubjects.length > 0) {
                    const randomDeveloping = developingSubjects[Math.floor(Math.random() * developingSubjects.length)];
                    comment += `${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is making steady progress in ${randomDeveloping.name} and continues to build confidence in this subject area. `;
                }
            }
            
            // Incorporate specific strengths
            if (strengths.trim()) {
                const strengthsList = strengths.split(',').map(s => s.trim()).filter(s => s);
                if (strengthsList.length > 0) {
                    const randomStrength = strengthsList[Math.floor(Math.random() * strengthsList.length)];
                    comment += `${pronoun.possessive.charAt(0).toUpperCase() + pronoun.possessive.slice(1)} ${randomStrength.toLowerCase()} is particularly noteworthy and contributes to ${pronoun.possessive} overall success in the classroom. `;
                }
            }
            
            // Address growth areas constructively
            if (weaknesses.trim()) {
                comment += `Moving forward, we will continue to support ${studentName} in developing ${weaknesses.toLowerCase()}. `;
                comment += `With ${pronoun.possessive} positive attitude and willingness to learn, I am confident ${pronoun.subject} will make continued progress in these areas. `;
            }
            
            // Personalized future-focused closing
            const futureClosings = [
                `${studentName} has shown wonderful growth this term, and I am excited to see ${pronoun.possessive} continued development. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} is well-prepared for future learning challenges.`,
                `I am proud of ${studentName}'s achievements and the progress ${pronoun.subject} has made. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} approaches learning with curiosity and determination.`,
                `${studentName} is a valued member of our classroom community. ${pronoun.subject.charAt(0).toUpperCase() + pronoun.subject.slice(1)} has established a strong foundation for continued academic and social success.`,
                `Working with ${studentName} has been rewarding, and ${pronoun.subject} consistently demonstrates the qualities that will serve ${pronoun.object} well in future educational endeavors.`
            ];
            
            comment += futureClosings[Math.floor(Math.random() * futureClosings.length)];
            
            return comment;
        }
    </script>
</body>
</html>
